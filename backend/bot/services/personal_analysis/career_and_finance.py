from aiogram.types import InlineKeyboardMarkup

from bot.keyboards.inline.base import (
    get_to_registration_kb,
    get_to_subscription_plans_kb,
)
from bot.keyboards.utils import one_button_keyboard
from bot.services.numerology import get_fate_number
from bot.text_templates.base import hd_types_translation
from bot.text_templates.career_and_finance import (
    authorities_descriptions,
    authorities_descriptions_trial,
    fate_numbers_descriptions,
    fate_numbers_descriptions_trial,
    houses_2_descriptions,
    houses_2_descriptions_trial,
    houses_10_descriptions,
    houses_10_descriptions_trial,
    strategies_descriptions,
    strategies_descriptions_trial,
    venus_signs_descriptions,
    venus_signs_descriptions_trial,
)
from core.models import Client


def get_career_and_finance_intro(
    client: Client,
) -> tuple[str, InlineKeyboardMarkup]:
    if not client.is_registered():
        return (
            client.genderize(
                '–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –≥–¥–µ —Ç–≤–æ–∏ –¥–µ–Ω—å–≥–∏ ‚Äî\n'
                '–Ω–æ {gender:—Å–∞–º,—Å–∞–º–∞} –µ—â—ë –Ω–µ –∑–Ω–∞–µ—à—å, –∫—Ç–æ —Ç—ã?\n\n'
                '–ü—Ä–æ–π–¥–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é. –í—Å—ë –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç–µ–±—è.',
            ),
            get_to_registration_kb(
                back_button_data='to_personal_analysis',
            ),
        )
    elif client.subscription_is_active() or client.has_trial():
        return (
            client.genderize(
                '–¢—ã –Ω–µ –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è.\n'
                '–¢—ã ‚Äî –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.\n'
                '–Ø –ø–æ–∫–∞–∂—É, –≥–¥–µ —Ç–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –¥–µ–Ω—å–≥–∏.\n\n'
                '{gender:–ì–æ—Ç–æ–≤,–ì–æ—Ç–æ–≤–∞} —É–∑–Ω–∞—Ç—å, –∫–∞–∫ –º–æ–Ω–µ—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–≤–æ—è —Å—É—Ç—å?',
            ),
            one_button_keyboard(
                text='–£–∑–Ω–∞—Ç—å',
                callback_data='show_career_and_finance',
                back_button_data='to_personal_analysis',
            ),
        )
    else:
        return (
            '–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∑–Ω–∞–µ—Ç, –∫—É–¥–∞ –µ–π —Ç–µ—á—å.\n'
            '–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –µ–π —ç—Ç–æ.\n\n'
            '–û—Ñ–æ—Ä–º–∏ –¥–æ—Å—Ç—É–ø ‚Äî –∏ —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ç–≤–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª.',
            get_to_subscription_plans_kb(
                back_button_data='to_personal_analysis',
            ),
        )


def get_career_and_finance_text(
    client: Client,
) -> str:
    venus_sign = [i for i in client.planets if i['name'] == 'Venus'][0]['sign']
    house_2 = [i for i in client.houses if i['house'] == 2][0]['sign']
    house_10 = [i for i in client.houses if i['house'] == 10][0]['sign']
    fate_number = get_fate_number(client.fullname)
    hd_type = hd_types_translation[client.type]
    if client.subscription_is_active():
        return client.genderize(
            'üöÄ –ö–∞—Ä—å–µ—Ä–∞ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã\n\n'
            '–¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—à—å.\n'
            '–¢—ã –≤—ã—Ä–∞–∂–∞–µ—à—å —Å–µ–±—è.\n'
            '–ö–∞–∂–¥–æ–µ —Ç–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ, –∫–∞–∂–¥—ã–π —à–∞–≥ ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ —Ç–∞–Ω—Ü–∞ —Å –∂–∏–∑–Ω—å—é.\n'
            '–ò –µ—Å–ª–∏ —Ä–∏—Ç–º —Å–æ–±—å—ë—Ç—Å—è ‚Äî —Ç—ã —ç—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å.\n'
            '–ü–æ—Ä–∞ —Å–Ω–æ–≤–∞ –ø–æ–ø–∞—Å—Ç—å –≤ —Ç–∞–∫—Ç.\n\n'
            '–î–µ–Ω—å–≥–∏ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ü–∏—Ñ—Ä—ã.\n'
            '–≠—Ç–æ —ç–Ω–µ—Ä–≥–∏—è –æ–±–º–µ–Ω–∞. –≠—Ç–æ —Ç–æ, —á–µ–º—É —Ç—ã –¥–∞—ë—à—å –≤–µ—Å.\n'
            '–í–µ–Ω–µ—Ä–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ç—ã –≤—ã–±–∏—Ä–∞–µ—à—å: –∑–∞ —á—Ç–æ –ø–ª–∞—Ç–∏—Ç—å, –≥–¥–µ –±—ã—Ç—å —â–µ–¥—Ä—ã–º, –∞ –≥–¥–µ ‚Äî –∑–∞–∫—Ä—ã—Ç—å—Å—è.\n'
            f'{venus_signs_descriptions[venus_sign]}\n\n'
            '–£ –∫–∞–∂–¥–æ–≥–æ –µ—Å—Ç—å —Å–≤–æ–π –∫–æ–¥ –∏–∑–æ–±–∏–ª–∏—è.\n'
            '–ò –æ–Ω –Ω–µ –≤ –≤–Ω–µ—à–Ω–µ–º. –û–Ω ‚Äî –≤ —Ç–æ–º, –∫–∞–∫ —Ç—ã —Å–æ–∑–¥–∞—ë—à—å, –∫–∞–∫ —Ç—ã –æ–ø–∏—Ä–∞–µ—à—å—Å—è –Ω–∞ —Å–µ–±—è, –∫–∞–∫ —Ç—ã –¥–µ–π—Å—Ç–≤—É–µ—à—å.\n'
            f'{houses_2_descriptions[house_2]}\n\n'
            '–¢—ã –º–æ–∂–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å ¬´–Ω–∞ –∫–æ–≥–æ-—Ç–æ¬ª.\n'
            '–ê –º–æ–∂–µ—à—å ‚Äî –Ω–∞ —Å–≤–æ—ë –∏–º—è.\n'
            '10 –¥–æ–º –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç, –≥–¥–µ —Ç—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å. –û–Ω –≥–æ–≤–æ—Ä–∏—Ç ‚Äî –∫–∞–∫–æ–π —Ç—ã, –∫–æ–≥–¥–∞ —Ç—ã –Ω–∞ –º–µ—Å—Ç–µ.\n'
            f'{houses_10_descriptions[house_10]}\n\n'
            '–ú–∏—Ä —É–∂–µ –≤–∏–¥–∏—Ç —Ç–µ–±—è.\n'
            '–ß–µ—Ä–µ–∑ –º–∞–Ω–µ—Ä—É, –≥–æ–ª–æ—Å, —Å—Ç–∏–ª—å, –ø–æ–≤–µ–¥–µ–Ω–∏–µ.\n'
            '–ò –≤–æ—Ç –∫–∞–∫ –æ–Ω —ç—Ç–æ —Å—á–∏—Ç—ã–≤–∞–µ—Ç:\n'
            f'{fate_numbers_descriptions[fate_number]}\n\n'
            '–°–ª—É—à–∞–π‚Ä¶ –ú–æ–∂–Ω–æ –±–µ–∂–∞—Ç—å. –ú–æ–∂–Ω–æ —Ç—è–Ω—É—Ç—å. –ê –º–æ–∂–Ω–æ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ ‚Äî ¬´–¥–∞¬ª.\n'
            '–¢–≤–æ—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è ‚Äî —ç—Ç–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ. –≠—Ç–æ –¥–≤–µ—Ä—å –±–µ–∑ –∑–∞–º–∫–∞.\n'
            f'{strategies_descriptions[hd_type]}\n\n'
            '–†–µ—à–µ–Ω–∏—è –º–æ–≥—É—Ç –∫–∞–∑–∞—Ç—å—Å—è –ª–æ–≥–∏—á–Ω—ã–º–∏.\n'
            '–ù–æ —Ç—ã –Ω–µ –ª–æ–≥–∏–∫–æ–π —Å—é–¥–∞ {gender:–ø—Ä–∏—à—ë–ª,–ø—Ä–∏—à–ª–∞}.\n'
            '–¢–≤–æ–π –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç ‚Äî —ç—Ç–æ —Ç–≤–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–∫—Å–µ–ª–µ—Ä–∞—Ç–æ—Ä.\n'
            f'{authorities_descriptions[client.authority]}\n\n'
            '–¢—ã –Ω–µ {gender:–æ–±—è–∑–∞–Ω,–æ–±—è–∑–∞–Ω–∞} –ø—Ä–æ–±–∏–≤–∞—Ç—å—Å—è.\n'
            '–¢—ã –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –±—ã—Ç—å —Å–æ–±–æ–π ‚Äî –∏ –º–∏—Ä –Ω–∞—á–Ω—ë—Ç –æ—Ç–∑—ã–≤–∞—Ç—å—Å—è.\n'
            '–ö–æ–≥–¥–∞ —Ç—ã –Ω–∞ —Å–≤–æ—ë–º –º–µ—Å—Ç–µ, –¥–µ–Ω—å–≥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –Ω–µ –∫–∞–∫ –Ω–∞–≥—Ä–∞–¥–∞, –∞ –∫–∞–∫ –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç.\n'
            '–¢–∞–∫ —á—Ç–æ –Ω–µ —Å—Ç—Ä–æ–π –∫–∞—Ä—å–µ—Ä—É. –°—Ç—Ä–æ–π —Å–µ–±—è.\n'
            '–ê –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤—ã—Å—Ç—Ä–æ–∏—Ç—Å—è —Å–∞–º–æ.',
        )
    elif client.has_trial():
        return client.genderize(
            'üöÄ –ö–∞—Ä—å–µ—Ä–∞ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã\n\n'
            '–¢—ã –ø–æ-—Å–≤–æ–µ–º—É —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ ¬´–¥–µ–Ω—å–≥–∏ ‚Äî —ç—Ç–æ...¬ª\n'
            '–î–ª—è –∫–æ–≥–æ-—Ç–æ ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å. –î–ª—è —Ç–µ–±—è, –≤–æ–∑–º–æ–∂–Ω–æ ‚Äî —Å–≤–æ–±–æ–¥–∞. –ò–ª–∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ. –ò–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.\n'
            '–í–µ–Ω–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: –∫–∞–∫ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∞—Ç—å, —Ç—Ä–∞—Ç–∏—Ç—å –∏ –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è.\n'
            f'{venus_signs_descriptions_trial[venus_sign]}\n\n'
            '–£ —Ç–µ–±—è —Å–≤–æ–π —Å–ø–æ—Å–æ–± –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å.\n'
            '–û–Ω –Ω–µ –≤—Å–µ–≥–¥–∞ ¬´–ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏¬ª. –ù–æ –µ—Å–ª–∏ –∏–¥—ë—à—å –ø–æ —Å–µ–±–µ ‚Äî –¥–µ–Ω—å–≥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç.\n'
            f'{houses_2_descriptions_trial[house_2]}\n\n'
            '–¢—ã —á—É–≤—Å—Ç–≤—É–µ—à—å, –∫–æ–≥–¥–∞ –¥–µ–ª–æ ‚Äú—Ç–≤–æ—ë‚Äù.\n'
            '10 –¥–æ–º –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –≤ —á—ë–º —Ç–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è. –ì–¥–µ –Ω–µ –Ω–∞–¥–æ –∏–≥—Ä–∞—Ç—å, –∞ –º–æ–∂–Ω–æ –±—ã—Ç—å —Å–æ–±–æ–π.\n'
            f'{houses_10_descriptions_trial[house_10]}\n\n'
            '–¢–æ, –∫–∞–∫ —Ç—ã –≤—Ö–æ–¥–∏—à—å –≤ –∫–æ–º–Ω–∞—Ç—É ‚Äî —É–∂–µ –≥–æ–≤–æ—Ä–∏—Ç –∑–∞ —Ç–µ–±—è.\n'
            '–í —ç—Ç–æ–º —á–∏—Å–ª–µ ‚Äî —Ç–≤–æ–π —Å—Ç–∏–ª—å, —Ö–∞—Ä–∏–∑–º–∞, –º–∞–Ω–µ—Ä–∞ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å.\n'
            f'{fate_number} - {fate_numbers_descriptions_trial[fate_number]}\n\n'
            '–î–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å ¬´–Ω–µ –≤–æ–≤—Ä–µ–º—è¬ª ‚Äî –∑–Ω–∞—á–∏—Ç —Ç–µ—Ä—è—Ç—å —Å–µ–±—è.\n'
            '–¢–≤–æ—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è ‚Äî –Ω–µ –ø—Ä–∞–≤–∏–ª–æ, –∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞. –û–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–µ –≥–Ω–∞—Ç—å—Å—è, –∞ –ø–æ–ø–∞–¥–∞—Ç—å –≤ —Ç–æ—á–∫—É.\n'
            f'{strategies_descriptions_trial[hd_type]}\n\n'
            '–£–º –º–æ–∂–µ—Ç —Å–ø–æ—Ä–∏—Ç—å. –ù–æ —Ç–µ–ª–æ –∑–Ω–∞–µ—Ç.\n'
            '–¢–≤–æ–π –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç ‚Äî –∫–∞–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–º–ø–∞—Å: —Ç–∏—Ö–∏–π, –Ω–æ —Ç–æ—á–Ω—ã–π.\n'
            f'{authorities_descriptions_trial[client.authority]}\n\n'
            '–¢—ã –º–æ–∂–µ—à—å –ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—Å—ë –ø–æ–¥—Ä—è–¥. –ê –º–æ–∂–µ—à—å ‚Äî —Å–ª—É—à–∞—Ç—å —Å–µ–±—è.\n'
            '–ö–æ–≥–¥–∞ —Ç—ã –≤ —Å–≤–æ–µ–π —ç–Ω–µ—Ä–≥–∏–∏,\n'
            '–¥–µ–Ω—å–≥–∏, –¥–µ–ª–æ –∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞—é—Ç –∑–≤—É—á–∞—Ç—å –≤ —É–Ω–∏—Å–æ–Ω.',
        )
